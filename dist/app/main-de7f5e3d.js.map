{"version":3,"sources":["webpack:///./src/app/index.js"],"names":["gsap","registerPlugin","ScrollTrigger","document","addEventListener","querySelectorAll","length","params","theme","localStorage","getItem","indexOf","themesPages","gambling","drugs","alcohol","emotions","pageClass","body","classList","contains","push","querySelector","sid","attributes","content","value","forEach","link","href","replace","join","item","e","isActive","toggle","window","bones_theme_window_height","select","TomSelect","allowEmptyOption","create","header","timeline","scrollTrigger","trigger","start","scrub","toggleClass","targets","className","backgroundColour","node","classes","toString","matches","match","matchesGrad","bonesthemeExtractColour","add","preventDefault","question","closest","i","parseInt","dataset","questionSet","label","questionLabel","answer","target","setItem","remove","nextSibling","location","doc","documentElement","style","setProperty","innerHeight","offsetHeight","setTimeout"],"mappings":"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","file":"app/main-de7f5e3d.js","sourcesContent":["// Libraries\nimport TomSelect from 'tom-select';\nimport { gsap } from 'gsap';\nimport { ScrollTrigger } from 'gsap/ScrollTrigger';\ngsap.registerPlugin( ScrollTrigger );\n\n// Style\nimport './style.scss';\n\n// Extract Background Colour from Gutenberg Classes\nfunction bonesthemeExtractColour( node ) {\n\tconst colReg = /has-(.[^\\s]*)-background-color/i;\n\tconst classes = node.classList.toString();\n\tconst matches = classes.match( colReg );\n\t\n\tif( matches !== null ) {\n\t\treturn matches[1];\n\t}\n\telse {\n\t\tconst colRegGrad = /has-(.[^\\s]*)-gradient-background/i;\n\t\tconst matchesGrad = classes.match( colRegGrad );\n\t\tif( matchesGrad !== null ) {\n\t\t\treturn matchesGrad[1];\n\t\t}\n\t}\n\n\treturn '';\n}\n\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\t// Sid Replace\n\t\n\tif( document.querySelectorAll( 'a[href*=\"{{params}}\"]' ).length > 0 ) {\n\t\t// Generate the parameters \n\t\tlet params = [];\n\n\t\t// Theme \n\t\tconst validThemes = [ 'gambling', 'drugs', 'alcohol', 'anger', 'all' ];\n\t\tlet theme = 'all'; // Default\n\t\tif( localStorage.getItem( 'question-2-answer' ) ) {\n\t\t\t// Ensure a valid response\n\t\t\ttheme = ( validThemes.indexOf( localStorage.getItem( 'question-2-answer' ) ) >= 0 ) ?\n\t\t\t\tlocalStorage.getItem( 'question-2-answer' ) : 'all';\n\t\t}\n\t\t// else {\n\t\t// Override if on one of these pages\n\t\tconst themesPages = {\n\t\t\tgambling: 'gambling',\n\t\t\tdrugs: 'drugs',\n\t\t\talcohol: 'alcohol',\n\t\t\temotions: 'anger'\n\t\t}\n\n\t\t// Check if someone is clicking from a theme page\n\t\tfor ( const pageClass in themesPages ) {\n\t\t\tif( document.body.classList.contains( 'page-' + pageClass ) ) {\n\t\t\t\ttheme = themesPages[pageClass];\n\t\t\t}\n\t\t}\n\t\t\t// validThemes.forEach( ( themeLabel ) => {\n\t\t\t// \tif( document.body.classList.contains( 'page-' + themeLabel ) ) {\n\t\t\t// \t\ttheme = themeLabel;\n\t\t\t// \t}\n\t\t\t// } );\n\t\t// }\n\t\tparams.push( \"theme=\" + theme );\n\t\n\t\t// Session \n\t\tlet session = 'initialConsultation'; // Default\n\t\t// if( localStorage.getItem( 'question-1-answer' ) ) {\n\t\t// \tconst validSessions = [ 'initialConsultation', 'supportedAdvice' ];\n\t\t// \t// Ensure a valid response\n\t\t// \tsession = ( validSessions.indexOf( localStorage.getItem( 'question-1-answer' ) ) >= 0 ) ?\n\t\t// \t\tlocalStorage.getItem( 'question-1-answer' ) : 'initialConsultation';\n\t\t// }\n\t\tparams.push( \"session=\" + session );\n\n\t\t// Append SID\n\t\tif( document.querySelector( 'meta[name=\"sid\"]' ) ) {\n\t\t\tconst sid = document.querySelector( 'meta[name=\"sid\"]' )?.attributes.content.value;\n\t\t\tparams.push( \"sid=\" + sid );\n\t\t}\n\n\t\t// Apply to each link\n\t\tdocument.querySelectorAll( 'a[href*=\"{{params}}\"]' ).forEach( ( link ) => {\n\t\t\tlink.href = link.href.replace( /{{params}}/i, params.join( \"&\" ) );\n\t\t} );\n\t}\n\n\t// document.querySelectorAll( 'a[href*=\"{{sid}}\"]' ).forEach( ( link ) => {\n\t// \tif( document.querySelector( 'meta[name=\"sid\"]' ) ) {\n\t// \t\tconst sid = document.querySelector( 'meta[name=\"sid\"]' )?.attributes.content.value;\n\t// \t\tlink.href = link.href.replace( /{{sid}}/i, sid );\n\t// \t}\n\t// } );\n\n\t// Navgation Appearance\n\tdocument.querySelectorAll( '.menu-toggle > .hamburger, .overlay-close .wp-block-button__link' ).forEach( ( item ) => {\n\t\titem.addEventListener( 'click', ( e ) => {\n\t\t\tconst isActive = document.body.classList.toggle( 'toggle-navigation' );\n\t\t\tdocument.querySelector( '.menu-toggle .hamburger' )?.classList.toggle( 'is-active', isActive );\n\t\t} );\n\t} );\t\n\n\t// iOS window height work around  \n  window.addEventListener( 'resize', bones_theme_window_height );\n  bones_theme_window_height();\n\n\t// Style form selects\n\tdocument.querySelectorAll( '.wp-site-blocks select').forEach( ( select ) => {\n\t\tnew TomSelect( select, {\n\t\t\tallowEmptyOption: true,\n\t\t\tcreate: true,\n\t\t\t// hidePlaceholder: false\n\t\t} );\n\t} );\n\t\n\t// Nav Appearance on Scroll\n\tif( document.querySelector( '.page-template-page-home-landing' ) == null ) {\n\t\t// console.log( 'working' );\n\t\tconst header = document.querySelector( 'header.wp-block-template-part' );\n\t\tif( header ) {\n\t\t\tconst start = 20; // header.offsetHeight - 1;\n\t\t\tgsap.timeline( {\n\t\t\t\tscrollTrigger: {\n\t\t\t\t\ttrigger: 'main',\n\t\t\t\t\tstart: start + \"px start\",\n\t\t\t\t\t// end: \"bottom bottom\",\n\t\t\t\t\tscrub: 1,\n\t\t\t\t\ttoggleClass: { targets: header, className: 'show-shadow' },\n\t\t\t\t\t// markers: true\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t// Nav Apperance before Scroll\n\tif( document.querySelector( 'main > .wp-block-post-content > *:first-child' ) ) {\n\t\tconst firstBlock = document.querySelector( 'main > .wp-block-post-content > *:first-child' );\n\t\t// Get colour from Gutenberg classes\n\t\tconst backgroundColour = bonesthemeExtractColour( firstBlock );\n\t\tif( backgroundColour != '' ) {\n\t\t\tdocument.body.classList.add( 'logo-fill-background-' + backgroundColour );\n\t\t}\n\t}\n\n\t// Logo Fill Colour\n\t// ScrollTrigger.matchMedia( {\n\t// \t\"(max-width: 767px)\": function() {\n\t\t\t\n\t// \t},\n\t\t// \"(min-width: 768px)\": function() {\n\t\t// \tdocument.querySelectorAll( '.wp-block-post-content > .has-background' ).forEach( ( block ) => {\n\t\t// \t\tconst colReg = /has-(.[^\\s]*)-background-color/i;\n\t\t// \t\tconst classes = block.classList.toString();\n\t\t// \t\tconst matches = classes.match( colReg );\n\t\t// \t\tlet backgroundColour = '';\n\t\t// \t\tif( matches !== null ) {\n\t\t// \t\t\tbackgroundColour = matches[1];\n\t\t// \t\t}\n\t\t// \t\telse {\n\t\t// \t\t\tconst colRegGrad = /has-(.[^\\s]*)-gradient-background/i;\n\t\t// \t\t\tconst matchesGrad = classes.match( colRegGrad );\n\t\t// \t\t\tif( matchesGrad !== null ) {\n\t\t// \t\t\t\tbackgroundColour = matchesGrad[1];\n\t\t// \t\t\t}\n\t\t// \t\t}\n\n\t\t// \t\tif( backgroundColour !== '' ) {\n\t\t// \t\t\tgsap.timeline( {\n\t\t// \t\t\t\tscrollTrigger: {\n\t\t// \t\t\t\t\ttrigger: block,\n\t\t// \t\t\t\t\tstart: \"start start+=1\",\n\t\t// \t\t\t\t\tend: \"bottom-=75 start\",\n\t\t// \t\t\t\t\tscrub: 1,\n\t\t// \t\t\t\t\ttoggleClass: { targets: document.body, className: 'logo-fill-background-' + backgroundColour },\n\t\t// \t\t\t\t\t// once: true,\n\t\t// \t\t\t\t\t// markers: true,\n\t\t// \t\t\t\t}\n\t\t// \t\t\t} );\n\t\t// \t\t}\n\t\t// \t} );\n\t\t// }\n\t// } );\n\n\t// Questions\n\tdocument.querySelectorAll( '.wp-block-questions a' ).forEach( ( link ) => {\n\t\tlink.addEventListener( 'click', ( e ) => {\n\t\t\te.preventDefault();\n\t\t\t\n\n\t\t\t// Current Question\n\t\t\tconst question = link.closest( '.questions' );\n\t\t\t\n\t\t\tconst i = parseInt( question.dataset.questionSet ) + 1;\n\t\t\tconst label = question.dataset.questionLabel;\n\t\t\tconst answer = e.target.dataset.answer;\n\n\t\t\t// Store questions and answer for later user\n\t\t\tlocalStorage.setItem( 'question-' + i + '-label', label );\n\t\t\tlocalStorage.setItem( 'question-' + i + '-answer', answer );\n\n\t\t\t// Show Next Question\n\t\t\tquestion.classList.remove( 'is-visible-question' );\n\t\t\tif( question.nextSibling !== null ) {\n\t\t\t\tquestion.nextSibling.classList.add( 'is-visible-question' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdocument.querySelector( '.questions-title' )?.classList.add( 'is-hidden' );\n\n\t\t\t\tif( localStorage.getItem( 'question-1-answer' ) == 'initialConsultation' ) {\n\t\t\t\t\t// For themselves\n\t\t\t\t\tif( e.target.dataset['redirect'] ) {\n\t\t\t\t\t\twindow.location = e.target.dataset['redirect'];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif( e.target.dataset['redirectOthers'] ) {\n\t\t\t\t\t\twindow.location = e.target.dataset['redirectOthers'];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t} );\n} );\n\n// iOS window height\nconst bones_theme_window_height = () => {\n  const doc = document.documentElement\n  doc.style.setProperty('--app-height', `${window.innerHeight}px`);\n\n\tif( document.querySelector( 'header' ) ) {\n\t\tdoc.style.setProperty('--app-header-height', `${document.querySelector( 'header' ).offsetHeight}px`);\n\t}\n}\n\nwindow.addEventListener( 'load', () => {\n\t// Landing Splash\n\tif( document.querySelector( 'body.page-home' ) ) {\n\t\t// Check if has been loaded before\n\t\tif( localStorage.getItem( 'helm-splash-loaded' ) ) {\n\t\t\t// Do nothing other than loading the normal page\n\t\t\tdocument.querySelector( '.wp-site-blocks' )?.classList.add( 'is-visible' );\n\t\t}\n\t\telse {\n\t\t\tif( document.querySelector( '.wp-block-template-part.overlay-splash' ) ) {\n\t\t\t\t// Show Spash\n\t\t\t\tdocument.querySelector( '.wp-block-template-part.overlay-splash' ).classList.add( 'is-visible' );\n\n\t\t\t\t// Load page behind\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tdocument.querySelector( '.wp-site-blocks' )?.classList.add( 'is-visible' );\n\t\t\t\t}, 500 );\n\n\t\t\t\t// Hide after two seconds\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tdocument.querySelector( '.wp-block-template-part.overlay-splash' ).classList.remove( 'is-visible' );\n\t\t\t\t}, 4000 );\n\t\t\t\t\n\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Make visible if something has gone wrong\n\t\t\t\tdocument.querySelector( '.wp-site-blocks' )?.classList.add( 'is-visible' );\n\t\t\t}\n\t\t\t// Set localStorage marker\n\t\t\tlocalStorage.setItem( 'helm-splash-loaded', true );\n\t\t}\n\t}\n} );\n"],"sourceRoot":""}